<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRIOLLITAS - Pedidos</title>
    <style>
        :root {
            --amarillo: #FFD700;
            --negro: #000000;
            --gris-card: #1e1e1e;
            --verde-precio: #2ecc71;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--negro);
            color: white;
            margin: 0;
            padding-bottom: 120px;
        }

        header {
            background-color: var(--negro);
            text-align: center;
            padding: 20px;
            border-bottom: 4px solid var(--amarillo);
            position: relative;
        }

        .logo-img { 
            max-width: 120px; 
            margin-bottom: 8px; 
            border-radius: 50%; 
            border: 2px solid var(--amarillo);
        }

        .titulo-app { font-size: 26px; font-weight: bold; color: var(--amarillo); margin: 0; text-transform: uppercase; }
        .firma { font-size: 11px; color: white; margin-top: 5px; font-weight: bold; background: #CC0000; display: inline-block; padding: 2px 8px; border-radius: 4px; }
        
        .btn-editar-perfil {
            position: absolute; top: 15px; right: 15px;
            background: #333; color: var(--amarillo); border: 1px solid var(--amarillo);
            padding: 5px 10px; border-radius: 20px; font-size: 11px; cursor: pointer;
        }

        .info-oficial { font-size: 13px; margin-top: 10px; line-height: 1.5; color: white; }

        .container { padding: 15px; }
        .categoria-titulo { 
            color: var(--amarillo); 
            border-bottom: 1px solid var(--amarillo); 
            padding: 10px 0; 
            margin-top: 25px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .plato-card {
            background: var(--gris-card);
            border-radius: 12px;
            padding: 15px;
            margin-top: 12px;
            border-left: 6px solid var(--amarillo);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .plato-info .nombre { color: var(--amarillo); font-weight: bold; font-size: 1.1em; }
        .plato-info .descripcion { color: #aaa; font-size: 0.85em; margin-top: 3px; display: block; max-width: 180px; }
        .plato-info .precio { color: var(--verde-precio); font-weight: bold; font-size: 1.15em; margin-top: 5px; }

        .controles { display: flex; align-items: center; gap: 15px; }
        .btn-accion {
            background: var(--amarillo); color: black; border: none;
            width: 38px; height: 38px; border-radius: 50%;
            font-size: 22px; font-weight: bold; cursor: pointer;
        }

        select, input, textarea {
            width: 100%; background: #111; color: white;
            border: 1px solid #333; border-radius: 10px; padding: 12px;
            margin-top: 10px; box-sizing: border-box; font-size: 16px;
        }

        .footer {
            position: fixed; bottom: 0; width: 100%; background: #000;
            padding: 15px 20px; border-top: 2px solid #333;
            display: flex; justify-content: space-between; align-items: center; box-sizing: border-box;
            z-index: 1000;
        }

        .btn-pedir {
            background: #25D366; color: white; border: none;
            padding: 14px 25px; border-radius: 30px; font-weight: bold; cursor: pointer;
        }

        .oculto { display: none !important; }
    </style>
</head>
<body>

<div id="app-content">
    <header>
        <button class="btn-editar-perfil" id="btn-edit" onclick="abrirRegistro()">‚úèÔ∏è Editar Datos</button>
        <img src="criollitas.png" class="logo-img" alt="Logo Criollitas" onerror="this.style.display='none'">
        <div class="titulo-app">CRIOLLITAS</div>
        <div class="firma">Hecha por Vibras Positivas</div>
        <div class="info-oficial">
            üìç Barrio El Tri√°ngulo<br>
            üìû Contacto: 3137956849<br>
            üõµ Domicilio: $5.000
        </div>
    </header>

    <div class="container">
        <div id="registro" class="oculto">
            <h3 style="text-align: center; color: var(--amarillo);">Tus Datos de Env√≠o</h3>
            <input type="text" id="r-nom" placeholder="Nombre Completo">
            <input type="text" id="r-dir" placeholder="Direcci√≥n de Entrega">
            <input type="tel" id="r-tel" placeholder="N√∫mero Celular">
            <button onclick="guardarU()" class="btn-pedir" style="width: 100%; background: var(--amarillo); color: black; margin-top: 15px;">GUARDAR Y CONTINUAR</button>
        </div>

        <div id="menu-cont">
            <div class="categoria-titulo">Nuestras Especialidades</div>
            <div id="items-especial"></div>

            <div class="categoria-titulo">Perros Calientes</div>
            <div id="items-perros"></div>

            <div class="categoria-titulo">Adiciones</div>
            <div id="items-adiciones"></div>

            <div class="categoria-titulo">Bebidas</div>
            <div id="items-bebidas"></div>
            
            <label style="display: block; margin-top: 20px; color: var(--amarillo); font-weight: bold;">Forma de Pago:</label>
            <select id="pago-metodo">
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia">Transferencia (Nequi/Bancolombia)</option>
            </select>

            <textarea id="obs" placeholder="Observaciones: (Ej. Sin cebolla, casa de rejas blancas, etc.)"></textarea>
        </div>
    </div>

    <div class="footer">
        <div>
            <div style="font-size: 11px; color: #aaa;">Total + Domicilio ($5.000):</div>
            <div id="total-val" style="color: var(--amarillo); font-weight: bold; font-size: 1.3em;">$5,000</div>
        </div>
        <button class="btn-pedir" onclick="enviarPedido()">PEDIR POR WHATSAPP</button>
    </div>
</div>

<script>
    const COSTO_DOMICILIO = 5000;
    const INFO_NEGOCIO = {
        nombre: "CRIOLLITAS",
        direccion: "Barrio El Tri√°ngulo",
        celular: "3137956849"
    };

    const menuData = {
        "mexicana_esp": { n: "Mexicana", d: "Papa criolla, guacamole, pico de gallo, carne desmechada, chorizo, maicitos y BBQ.", p: 37000, cat: "especial" },
        "ranchera_esp": { n: "Ranchera", d: "Papa criolla, salchicha ranchera, maicitos, tocineta y huevo de codorniz.", p: 25000, cat: "especial" },
        "mega_big": { n: "Criollitas Mega Big", d: "Papa criolla, tocineta, chorizo, chicharr√≥n, queso y huevos de codorniz.", p: 38000, cat: "especial" },
        "criollitas_trad": { n: "Criollitas", d: "Papa criolla, tocineta, chorizo, queso mozarella y huevo de codorniz.", p: 18000, cat: "especial" },
        "contentosa": { n: "Contentosa", d: "Papa criolla, chicharr√≥n al barril, costilla al barril, guacamole y arepa queso.", p: 38000, cat: "especial" },
        "chicharron_ai": { n: "Chicharr√≥n al Barril", d: "Papa criolla, arepa con queso, chicharr√≥n al barril y chimichurri.", p: 24000, cat: "especial" },
        "paisa": { n: "Paisa", d: "Papa criolla, guacamole, chicharr√≥n, chorizo, maduritos y huevo de codorniz.", p: 32000, cat: "especial" },
        "callejera": { n: "Callejera", d: "Papa criolla, tocineta, chorizo, chicharr√≥n al barril, huevos y ma√≠z dulce.", p: 35000, cat: "especial" },

        "perro_mex": { n: "Perro Mexicano", d: "Pan artesanal, salchicha americana, guacamole, pico de gallo, queso y tocineta.", p: 21000, cat: "perros" },
        "perro_cal": { n: "Perro Callejero", d: "Pan artesanal, ripio, salchicha americana, queso con maicito y tocineta.", p: 18000, cat: "perros" },
        "perro_ran": { n: "Perro Ranchero", d: "Pan artesanal, salchicha s√∫per ranchera, pepinillos dulces y tocineta.", p: 22000, cat: "perros" },

        "extra_huevos": { n: "Huevo de Codorniz", p: 4000, cat: "adiciones" },
        "extra_queso": { n: "Queso Extra", p: 4000, cat: "adiciones" },
        "extra_salchicha": { n: "Salchicha Extra", p: 5000, cat: "adiciones" },
        "extra_chorizo": { n: "Chorizo Extra", p: 4000, cat: "adiciones" },
        "extra_guacamole": { n: "Guacamole Extra", p: 3000, cat: "adiciones" },
        "extra_pico": { n: "Pico de Gallo Extra", p: 3000, cat: "adiciones" },
        "extra_maduritos": { n: "Maduritos Extra", p: 3000, cat: "adiciones" },
        "extra_arepa": { n: "Arepa con Queso Extra", p: 4000, cat: "adiciones" },
        "extra_chicharron_barril": { n: "Chicharr√≥n al Barril (Adici√≥n)", p: 12000, cat: "adiciones" },
        "extra_costilla_barril": { n: "Costilla al Barril (Adici√≥n)", p: 12000, cat: "adiciones" },

        "gas_peq": { n: "Gaseosa Personal", p: 5000, cat: "bebidas" },
        "gas_grande": { n: "Gaseosa 1.5L", p: 9000, cat: "bebidas" },
        "agua": { n: "Botella de Agua", p: 4000, cat: "bebidas" },
        "agua_sab_p": { n: "Agua Saborizada Peque√±a", p: 2000, cat: "bebidas" },
        "agua_sab_g": { n: "Agua Saborizada Grande", p: 5000, cat: "bebidas" }
    };

    let carrito = {};

    window.onload = () => {
        const user = localStorage.getItem('p_user_criollitas');
        if (!user) {
            abrirRegistro();
        } else {
            cerrarRegistro();
        }
        renderMenu();
    };

    function abrirRegistro() {
        document.getElementById('registro').classList.remove('oculto');
        document.getElementById('menu-cont').classList.add('oculto');
    }

    function cerrarRegistro() {
        document.getElementById('registro').classList.add('oculto');
        document.getElementById('menu-cont').classList.remove('oculto');
    }

    function renderMenu() {
        for (let id in menuData) {
            const item = menuData[id];
            const html = `<div class="plato-card">
                <div class="plato-info">
                    <div class="nombre">${item.n}</div>
                    <small class="descripcion">${item.d || ''}</small>
                    <div class="precio">$${item.p.toLocaleString('es-CO')}</div>
                </div>
                <div class="controles">
                    <button class="btn-accion" onclick="sumar('${id}', -1)">-</button>
                    <span id="cant-${id}" style="font-weight:bold; width:20px; text-align:center;">0</span>
                    <button class="btn-accion" onclick="sumar('${id}', 1)">+</button>
                </div>
            </div>`;
            document.getElementById('items-' + item.cat).innerHTML += html;
        }
    }

    function guardarU() {
        const n = document.getElementById('r-nom').value, d = document.getElementById('r-dir').value, t = document.getElementById('r-tel').value;
        if(n && d && t) {
            localStorage.setItem('p_user_criollitas', JSON.stringify({n, d, t}));
            cerrarRegistro();
        } else alert("Por favor completa todos los datos.");
    }

    function sumar(id, v) {
        carrito[id] = Math.max(0, (carrito[id] || 0) + v);
        document.getElementById('cant-' + id).innerText = carrito[id];
        let totalSub = 0;
        let tieneItems = false;
        for (let k in carrito) {
            totalSub += carrito[k] * menuData[k].p;
            if(carrito[k] > 0) tieneItems = true;
        }
        const totalFinal = tieneItems ? totalSub + COSTO_DOMICILIO : COSTO_DOMICILIO;
        document.getElementById('total-val').innerText = "$" + totalFinal.toLocaleString('es-CO');
    }

    function enviarPedido() {
        let subtotal = 0, detalle = "", user = JSON.parse(localStorage.getItem('p_user_criollitas'));
        for (let k in carrito) {
            if (carrito[k] > 0) {
                subtotal += carrito[k] * menuData[k].p;
                detalle += `‚Ä¢ ${carrito[k]}x ${menuData[k].n}\n`;
            }
        }
        if (subtotal === 0) return alert("Selecciona productos para tu pedido.");
        
        const totalFinal = subtotal + COSTO_DOMICILIO;
        const hora = new Date().toLocaleString("es-CO", {timeZone: "America/Bogota"});

        let msg = `üçü *${INFO_NEGOCIO.nombre}* üçü\n`;
        msg += `üìç ${INFO_NEGOCIO.direccion}\n`;
        msg += `üìû Contacto: ${INFO_NEGOCIO.celular}\n`;
        msg += `-----------------------------\n`;
        msg += `*PEDIDO NUEVO* | ${hora}\n\n`;
        msg += `*CLIENTE:* ${user.n}\n`;
        msg += `*DIR ENTREGA:* ${user.d}\n`;
        msg += `*TEL:* ${user.t}\n\n`;
        msg += `*PRODUCTOS:*\n${detalle}\n`;
        msg += `*SUBTOTAL:* $${subtotal.toLocaleString('es-CO')}\n`;
        msg += `*DOMICILIO:* $${COSTO_DOMICILIO.toLocaleString('es-CO')}\n`;
        msg += `*TOTAL A PAGAR: $${totalFinal.toLocaleString('es-CO')}*\n\n`;
        msg += `*PAGO:* ${document.getElementById('pago-metodo').value}\n`;
        msg += `*OBS:* ${document.getElementById('obs').value || 'Ninguna'}\n\n`;
        msg += `_Hecho por Vibras Positivas_`;

        window.open(`https://wa.me/57${INFO_NEGOCIO.celular}?text=${encodeURIComponent(msg)}`, '_blank');
    }
</script>
</body>
</html>
